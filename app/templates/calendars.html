{% extends "base.html" %}
{% set title = "Calendarios" %}
{% block content %}
<div class="actions">
  <a class="button" href="/calendars/new">Novo Calendario Letivo</a>
</div>
<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Ano</th>
      <th>Dias letivos</th>
      <th>Feriados</th>
      <th>Status</th>
      <th>Acoes</th>
    </tr>
  </thead>
  <tbody>
    {% for calendar in calendars %}
    <tr>
      <td>{{ calendar.id }}</td>
      <td>{{ calendar.ano }}</td>
      {% set total_letivos = 0 %}
      {% for dias in calendar.dias_letivos_por_mes %}
        {% set total_letivos = total_letivos + (dias | length) %}
      {% endfor %}
      {% set total_feriados = 0 %}
      {% for dias in calendar.feriados_por_mes %}
        {% set total_feriados = total_feriados + (dias | length) %}
      {% endfor %}
      <td>{{ total_letivos }}</td>
      <td>{{ total_feriados }}</td>
      <td><span class="tag">{{ "Ativo" if calendar.ativo else "Inativo" }}</span></td>
      <td>
        <div class="actions">
          <a class="button secondary" href="/calendars/{{ calendar.ano }}/edit">Editar</a>
          <a class="button ghost" href="/calendars/{{ calendar.ano }}/calendar-view">Modo Calendario</a>
          <form method="post" action="/calendars/{{ calendar.ano }}/delete">
            <button class="button danger" type="submit">Excluir</button>
          </form>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
